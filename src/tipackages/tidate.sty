% Copyright (c) 2014 Institute for Theoretical Information Technology,
%                    RWTH Aachen University
%
% This software may be modified and distributed under the terms of the MIT
% license. See the LICENSE file for details.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tidate}[2015/07/16 v0.1]

\newif\iftidate@english
\tidate@englishfalse
\DeclareOption{english}{
  \tidate@englishtrue
  \PassOptionsToPackage{\CurrentOption}{tiproblem}
}

\ProcessOptions\relax

\usepackage{tiinternal}

% Overwrite datetime's am/pm formats.
\renewcommand{\amname}{a.m.}
\renewcommand{\pmname}{p.m.}

\def\tidate@examday{1}
\def\tidate@exammonth{1}
\def\tidate@examyear{1970}
\def\tidate@examhour{0}
\def\tidate@examminute{0}

\iftidate@english
  \newdateformat{tidate@examdateformat}{%
    \dayofweekname{\THEDAY}{\THEMONTH}{\THEYEAR},~%
    \monthname[\THEMONTH]~{\THEDAY},~\THEYEAR%
  }
  \def\tidate@setdateformat{\tidate@examdateformat}
  \newtimeformat{tidate@timeformat}{%
    \twodigit{\THEHOURXII}:\twodigit{\THEMINUTE}~\amorpmname%
  }
  \settimeformat{tidate@timeformat}
\else
  \newdateformat{tidate@examdateformat}{%
    \dayofweekname{\THEDAY}{\THEMONTH}{\THEYEAR},~%
    \twodigit{\THEDAY}.~\monthname[\THEMONTH]~\THEYEAR%
  }
  \def\tidate@setdateformat{\tidate@examdateformat}
  \newtimeformat{tidate@timeformat}{%
    \twodigit{\THEHOUR}:\twodigit{\THEMINUTE}~Uhr%
  }
  \settimeformat{tidate@timeformat}
\fi

\newcommand*{\setdate}[5]{
  \def\tidate@day{#1}
  \def\tidate@month{#2}
  \def\tidate@year{#3}
  \def\tidate@hour{#4}
  \def\tidate@minute{#5}
}

\newcommand*{\tidate@insertdate}{%
  \tidate@setdateformat%
  \formatdate{\tidate@day}{\tidate@month}{\tidate@year}%
}

\newcommand*{\tidate@inserttime}{%
  \formattime{\tidate@hour}{\tidate@minute}{00}%
}

\endinput

